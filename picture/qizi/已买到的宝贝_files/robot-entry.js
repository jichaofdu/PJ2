(undefined!=window.KISSY)&&KISSY.ready(function(a){KISSY.use("dom, event, ajax",function(g,q,p,w){q=q||g.DOM,p=p||g.Event;var K=19;if(q.get("#J_GlobalRobotEntry")){g.log("more than one robot entry on the page!");return false}var j="";var u=false;var x=null;if(window.G_RobotConfig&&window.G_RobotConfig.mainContentWidth){x=window.G_RobotConfig.mainContentWidth}else{x=q.get("#content")&&q.get("#content").scrollWidth}var J="";if(window.G_RobotSourceId){J=window.G_RobotSourceId}else{if(window.G_RobotConfig&&window.G_RobotConfig.sourceId){J=window.G_RobotConfig.sourceId}}var A="right";if(window.G_RobotConfig&&window.G_RobotConfig.align&&window.G_RobotConfig.align=="left"){A="left"}var P="http://service.taobao.com/support/minerva/robot.htm";var r=null;var M=false;var m=false;var f=true;var e=false;function l(){if(e==true){return}e=true;g.io({type:"get",url:"http://www.taobao.com/go/rgn/robot/robot-entry-verision-jsonp.php",dataType:"jsonp",jsonpCallback:"RobotEntryUpdateJSONPCallback",success:function(D){if(K!=D.version){var E=document.createElement("iframe");E.style.display="none";E.src="http://www.taobao.com/go/rgn/robot/robot-entry-update.php";document.body.appendChild(E)}},error:function(){g.log("update jsonp fail!")}})}function V(){var D=false;if((window.G_RobotConfig&&window.G_RobotConfig.skin=="tmall")||(/tmall\.[com|net|org]/.test(window.location.hostname))){var S="";if(g.UA.ie&&g.UA.ie==6){S="http://gtms01.alicdn.com/tps/i1/T1gGb6FkpaXXXomfQu-111-142.png"}else{S="http://gtms01.alicdn.com/tps/i1/T1ZxHWFbheXXXomfQu-111-142.png"}u=true;var E='.g-robot-e .tao-doll, .g-robot-e .close-btn, .g-robot-e .other-question, .g-robot-e h3 i, .g-robot-e .service-question-list li {background-image: url("'+S+'"); background-repeat: no-repeat; } .g-robot-e {position: fixed; _position: absolute; right: 100px; bottom: 20%; z-index: 10002; /**/ width: 39px; height: 39px; } .g-robot-e .tao-doll {display: block; position: relative; height: 86px; cursor: move; /*\u5a23\u8bf2\u59de*/ background-position: -37px -100px; width: 39px; } .g-robot-e .close-btn {display: block; position: absolute; top: 16px; right: 20px; padding: 3px; text-decoration: none; /**/ background-position: -74px -124px; width: 12px; height: 12px; } .g-robot-e .service-question-list-wrap {position: absolute; bottom: 25px;_bottom: 70px; right: -5px; width: 218px; background-color: #c41d1d; /**/ border-top-left-radius: 8px; border-top-right-radius: 8px; } .g-robot-e .service-question-list-wrap h3 {margin: 0 0 0 0; height: 45px; line-height: 52px; padding-left: 43px; /**/ background-color: #e8504f; border-top-left-radius: 8px; border-top-right-radius: 8px; } .g-robot-e .service-question-list-wrap .entry-title {display: inline;font-size: 18px; color: white; text-decoration: none; font-family: "\5fae\8f6f\96c5\9ed1,\9ed1\4f53"; cursor: default; outline: none; }.g-robot-e .service-question-list-wrap .entry-title-0{display: none;} .g-robot-e .service-question-list-wrap h3 i {position: absolute; display: block; top: 16px; left: 16px; width: 23px; height: 18px; /**/ background-position: -93px -123px; } .g-robot-e .service-question-list-wrap .other-question {position: absolute; height: 20px; line-height: 20px; font-weight: normal; text-decoration: none; /**/ background-color: #e8504f; background-image: none; width: 188px; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; color: white; font-size: 14px; font-weight: bold; padding: 5px 15px; bottom: -29px; _bottom: -29px; left: 0px; } .g-robot-e .service-question-list-wrap .service-question-list {background: #eaeaea; position: relative; margin: 0 0 0 0; height: 256px; overflow: hidden; } .g-robot-e .service-question-list-wrap .service-question-list ul {position: relative; top: 0; left: 0; list-style: none; margin: 0; padding: 0; } .g-robot-e .service-question-list-wrap .service-question-list li {padding: 5px 20px 5px 15px; margin: 0 3px; border-bottom: 1px dotted #fff; background-position: -75px -144px; } .g-robot-e .service-question-list-wrap .service-question-list a {color: #666; text-decoration: none; } .g-robot-e .service-question-list-wrap-closed {padding: 0 0 35px 0; right: 6px; /**/ background-color: #eaeaea; width: 28px; height: 100px; border-top-left-radius: 5px; border-top-right-radius: 5px; top: -116px; left: 0px; } .g-robot-e .service-question-list-wrap-closed h3 {margin: 0; width: 26px; height: auto; text-align: center; font-size: 12px; line-height: 20px; /**/ padding: 5px 0px; margin: 1px; border-top-left-radius: 5px; border-top-right-radius: 5px; background-color: #fafafa; }.g-robot-e .service-question-list-wrap-closed .entry-title{display: none;}.g-robot-e .service-question-list-wrap-closed .entry-title-0{display:inline;} .g-robot-e .service-question-list-wrap-closed h3 .entry-title {font-size: 14px; cursor: pointer; /**/ color: black; } .g-robot-e .service-question-list-wrap-closed h3 i {left: 7px; /**/ background-position: -7px -83px; width: 15px; height: 15px; top: 100px; } .g-robot-e .service-question-list-wrap-closed .other-question, .g-robot-e .service-question-list-wrap-closed .service-question-list {display: none; } .g-robot-e .service-question-list-wrap-closed .close-btn {display: none; } .service-dd-mask {left: 0; top: 0; width: 100%; height: 100%; cursor: move; position: fixed; z-index: 999999; }'}else{var E='.g-robot-e .service-question-list li, .g-robot-e .close-btn, .g-robot-e .panel-corner {background-image: url(http://img04.taobaocdn.com/tps/i4/T1tQrSXjJhXXctBpjk-58-40.png); background-repeat: no-repeat; } .g-robot-e {position: fixed; _position: absolute; right: 100px; bottom: 20%; width: 75px; height: 84px; z-index: 10002; } .g-robot-e:after {content: "0"; display: block; clear: both; height: 0; visibility: hidden; } .g-robot-e .tao-doll {display: block; position: relative; width: 75px; height: 84px; background-image: url(http://img03.taobaocdn.com/tps/i3/T18ovTXo4XXXc.pmjn-75-84.png); background-position: 0 0; _background: none; _filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="http://img03.taobaocdn.com/tps/i3/T18ovTXo4XXXc.pmjn-75-84.png",sizingMethod="image"); cursor: move; } .g-robot-e .service-question-list-wrap {position: absolute; bottom: 52px; right: 17px; padding: 12px 12px; background-color: #fff3da; border: 1px solid #fbcfac; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; } .g-robot-e .service-question-list-wrap h3 {width: 190px; margin: 0 0 0 3px; position: relative; }.g-robot-e .service-question-list-wrap h3 .other-question{margin-left:5px;color:#5382AA;text-decoration:none;font-size:12px;}.g-robot-e .service-question-list-wrap h3 .other-question:hover{text-decoration:underline;color:#F60;} .g-robot-e .service-question-list-wrap h3 .entry-title {font-size: 18px; color: #333; text-decoration: none; font-family: "\\5fae\\8f6f\\96c5\\9ed1,\\9ed1\\4f53"; cursor: default; outline: none; } .g-robot-e .service-question-list-wrap h3 .entry-title:hover {opacity: 1; text-decoration: none; } .g-robot-e .service-question-list-wrap .panel-corner {display: block; position: absolute; width: 41px; height: 24px; right: 60px; bottom: -24px; _font-size: 0; background-position: 0 -13px; } .g-robot-e .service-question-list {position:relative;margin: 5px 0 0 0; width:193px;height: 145px;overflow: hidden;} .g-robot-e .service-question-list ul {position: relative; top:0; margin: 0; padding: 0; list-style: none; } .g-robot-e .service-question-list ul li {width: 185px;overflow: hidden; padding: 5px 0 1px 8px; background-position: -52px -18px; } .g-robot-e .service-question-list ul li a {color: #5382AA; text-decoration: none; } .g-robot-e .service-question-list ul li a:hover {color: #f60; text-decoration: underline; }  .g-robot-e .service-question-list ul li a strong{font-weight: normal;color: red;} .g-robot-e .close-btn {display: block; position: absolute; top: 10px; right: 10px; width: 8px; height: 9px; padding: 3px; background-position: -35px 3px; text-decoration: none; } .g-robot-e .close-btn:hover {background-position: -48px 3px; text-decoration: none; } .g-robot-e .service-question-list-wrap-closed {padding: 0 0 8px 0; right: 42px; }.g-robot-e .service-question-list-wrap-closed h3 .other-question, .g-robot-e .service-question-list-wrap-closed .service-question-list, .g-robot-e .service-question-list-wrap-closed .close-btn {display: none; } .g-robot-e .service-question-list-wrap-closed h3 {margin: 0; width: 26px; padding: 10px 0 8px; text-align: center; } .g-robot-e .service-question-list-wrap-closed h3 .entry-title {font-size: 14px; cursor: pointer; } .g-robot-e .service-question-list-wrap-closed h3 .entry-title:hover {opacity: 0.8; } .g-robot-e .service-question-list-wrap-closed .panel-corner {width: 8px; height: 9px; right: 12px; bottom: -9px; background-position: 0 0; } .g-robot-e .hidden {display: none !important; } .service-dd-mask {left:0;top:0;width: 100%; height: 100%; cursor: move; position: fixed; z-index: 999999; }'}q.addStyleSheet(E);t();z();s();if(!(g.UA.ie&&g.UA.ie==6)){p.on(window,"resize",function(){T()});T()}}function T(){if(x){j=document.body.clientWidth||document.documentElement.clientWidth;if(A=="left"){q.get("#J_GlobalRobotEntry").style.left=(j-x)/2-75+"px"}else{q.get("#J_GlobalRobotEntry").style.left=x+(j-x)/2+"px"}}else{q.get("#J_GlobalRobotEntry").style.left=""}q.get("#J_GlobalRobotEntry").style.top=""}function v(E){if(!E){return false}var D=E.questions;if(g.isArray(D)){Y(D)}else{return false}if(g.UA&&g.UA.ie&&g.UA.ie==6){Z()}n()}function Y(ac){var S="";var E="";for(var ab=0;ab<ac.length;++ab){var D="";D=P+"?source_id="+J+"&init_ques="+encodeURIComponent(decodeURIComponent(ac[ab].title).replace(/#/g,""));if(window.G_RobotConfig&&window.G_RobotConfig.bizMap){D+=I(window.G_RobotConfig.bizMap)}E+='<li><a class="J_R_Robot" target="_blank" href="'+D+'" hidefocus title="'+decodeURIComponent(ac[ab].title).replace(/#/g,"")+'">'+decodeURIComponent(ac[ab].title).replace(/#(.*)#/,"<strong>$1</strong>")+"</a></li>"}if(E!=""){S='<ul class="J_ServiceItemsBox">'+E+"</ul>"}else{S="\u7f03\u6220\u7cb6\u95bf\u6b12\ue1e4\u951b\ufffd"}q.get("#J_GlobalRobotEntry .J_ServiceQuestionList").innerHTML=S;if(q.height(q.get("#J_GlobalRobotEntry .J_ServiceQuestionList"))>q.height(q.get("#J_GlobalRobotEntry .J_ServiceItemsBox"))){q.get("#J_GlobalRobotEntry .J_ServiceQuestionList").style.height="auto";q.get("#J_GlobalRobotEntry .J_ServiceQuestionList").style.zoom="1";q.get("#J_GlobalRobotEntry .J_ServiceItemsBox").style.top="0";M=false}else{M=true}}function I(S){var E="";for(var D in S){E+="&"+D+"="+S[D]}return E}function t(){var D='<div id="J_GlobalRobotEntry" class="g-robot-e" data="global robot-entry"><div class="J_ServiceListWrap service-question-list-wrap '+(N.getItem("robot-close")?"service-question-list-wrap-closed":"")+'"><h3 class="J_Title"><i></i><a class="entry-title entry-title-0 J_EntryTitle" href="#" hidefocus>'+((u==true)?decodeURIComponent("%E5%9C%A8%E7%BA%BF%E5%92%A8%E8%AF%A2"):"")+'</a><a class="entry-title J_EntryTitle" href="#" hidefocus>'+decodeURIComponent("%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98")+'</a><a class="other-question J_R_Robot" href="'+P+"?source_id="+J+'" hidefocus target="_blank">'+decodeURIComponent("%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98")+"</a>";D+='</h3><div class="service-question-list J_ServiceQuestionList"><div style="text-align:center;line-height: 100px;"><img src="http://img03.taobaocdn.com/tps/i3/T1b1m3XkVpXXXXXXXX-32-32.gif" /></div>';D+='</div><s class="panel-corner"></s><a href="#" class="close-btn J_CloseBtn"></a></div><div class="tao-doll J_TaoDoll"></div></div>';document.body.appendChild(q.create(D))}function z(){var E=q.get("#J_GlobalRobotEntry"),D=q.get(".J_ServiceListWrap",E),S=q.get(".J_Title",E);if(D){p.on(D,"click",function(ac){ac.halt();var ab=ac.target;if(q.hasClass(D,"service-question-list-wrap-closed")){q.removeClass(D,"service-question-list-wrap-closed");f=false;N.removeItem("robot-close");l();G();i&&clearTimeout(i)}if(q.hasClass(ab,"J_CloseBtn")){q.addClass(D,"service-question-list-wrap-closed");f=true;N.setItem("robot-close","true")}else{if(q.hasClass(ab,"J_R_Robot")||q.hasClass((ab=ab.parentNode),"J_R_Robot")){if(g.UA&&g.UA.ie&&g.UA.ie==6){r&&r.close&&r.close();r=window.open(ab.getAttribute("href"),decodeURIComponent("%E6%99%BA%E8%83%BD%E6%B7%98%E5%B0%8F%E4%BA%8C"),"width=970,height=580,location=no,resizable=yes,scrollbars=0");r.focus()}else{var ad=window.open(ab.getAttribute("href"),decodeURIComponent("%E6%99%BA%E8%83%BD%E6%B7%98%E5%B0%8F%E4%BA%8C"),"width=970,height=580,location=no,resizable=yes,scrollbars=0");ad.focus()}}}});p.on(D,"mouseenter mouseleave",function(ab){if(ab.type=="mouseenter"){L();i&&clearTimeout(i)}else{if(ab.type=="mouseleave"){n()}}});p.on(window,"blur",k)}}function O(D){p.remove(window,"focus",O);p.on(window,"blur",k);n()}function k(D){p.remove(window,"blur",k);p.on(window,"focus",O);L()}var H=null,o=null,h=60,y=1,F=0;function n(){if(M==true){L();var S=q.get("#J_GlobalRobotEntry");var E=q.get(".J_ServiceItemsBox",S);var D=E.scrollHeight;var ab=D-q.height(q.get(".J_ServiceQuestionList",S));if(ab<=0){return}H=setInterval(function(){F-=y;if(Math.abs(F)>=ab||F>=0){y=0-y;L();o=setTimeout(function(){n()},1000)}E.style.top=F+"px"},h)}}function L(){if(M==true){H&&clearInterval(H);o&&clearTimeout(o)}}var i=setTimeout(function(){});function Q(){if(window.G_RobotConfig&&window.G_RobotConfig.autoClose&&window.G_RobotConfig.autoClose>0){i=setTimeout(function(){var E=q.get("#J_GlobalRobotEntry"),D=q.get(".J_ServiceListWrap",E);q.addClass(D,"service-question-list-wrap-closed");f=true;N.setItem("robot-close","true")},window.G_RobotConfig.autoClose)}}var C={x:0,y:0,left:0,top:0,mask:null,box:null,taoDoll:null};function s(){C.box=q.get("#J_GlobalRobotEntry");C.taoDoll=q.get(".J_TaoDoll",C.box);p.on(C.taoDoll,"mousedown",function(D){D.halt();b();C.x=D.pageX;C.y=D.pageY;C.left=parseInt(q.css(C.box,"left"),10);C.top=parseInt(q.css(C.box,"top"),10);aa()})}function c(E){for(var D in E){C.key=E.key}}function b(){p.on(document,"mousemove",B);p.on(document,"mouseup",W);if(g.UA&&g.UA.ie){}}function W(){p.remove(document,"mousemove",B);p.remove(document,"mouseup",W);R()}function B(D){D.halt();q.css(C.box,"left",C.left+D.pageX-C.x+"px");q.css(C.box,"top",C.top+D.pageY-C.y+"px")}function aa(){C.mask=q.create('<div class="service-dd-mask"></div>');document.body&&(document.body.appendChild(C.mask))}function R(){if(C.mask){C.mask.onmousemove=null;q.remove(C.mask);C.mask=null}}function Z(){var D=q.get("#J_GlobalRobotEntry");p.on(window,"scroll resize",function(){D.className=D.className})}var N={conn:null,init:function(){if(g.UA){if(window.localStorage){N.conn=window.localStorage}else{try{N.conn=document.createElement("INPUT");N.conn.type="hidden";N.conn.style.display="none";N.conn.addBehavior("#default#userData");document.body.appendChild(N.conn)}catch(D){return false}}}return true},setItem:function(D,E){N.init();if(N.conn==null){return}if(window.localStorage){N.conn.setItem(D,E)}else{try{N.conn.load(location.hostname);N.conn.setAttribute(D,E);N.conn.save(location.hostname)}catch(S){return false}}},getItem:function(D){N.init();if(N.conn==null){return}if(window.localStorage){return N.conn.getItem(D)}else{try{N.conn.load(location.hostname);return N.conn.getAttribute(D)}catch(E){return""}}},removeItem:function(D){N.init();if(N.conn==null){return}if(window.localStorage){N.conn.removeItem(D)}else{try{N.conn.load(location.hostname);N.conn.removeAttribute(D);N.conn.save(location.hostname)}catch(E){return false}}}};function U(){var D="trade.taobao.com";if(window.location.hostname!=D){return false}if(Math.random()*100<=1){var E={hostname:window.location&&window.location.hostname,isClosed:N.getItem("robot-close")||"false",screenWidth:(window.screen)?(window.screen.width):(0),viewWidth:(document.documentElement)?(document.documentElement.clientWidth):(0),UA:g.JSON.stringify(g.UA)};d(E,"yumen_robot_entry_bought")}}function d(E,ab){var D="http://log.mmstat.com/ued.1.1.2?type=9&_r_="+Math.random()+"&_gm:id="+ab+"&"+KISSY.param(E);var S=new Image();S.onload=function(){window.G_RobotConfig.goldMinerRequest=null};S.src=D;window.G_RobotConfig.goldMinerRequest=S}var X=false;function G(){if(X==true){return}X=true;var E="http://www.taobao.com/go/rgn/robot/question-list-";var S="",ab="",D=null;if(J){S=E+J+".php";ab="RobotEntryJSONPCallback"}else{S=E+"default.php";ab="RobotEntryJSONPCallbackDefault"}D=g.io({type:"get",url:S,dataType:"jsonp",jsonpCallback:ab,success:function(ac){v(ac)},error:function(ad,ac){g.log("[robot-entry]:\u93c8\u54c4\u6ad2\u6d5c\u54c4\u53c6\u9359\uff47\u6b91sourceId\u95b0\u5d87\u7586\u93c8\u5910\u654a\u951b\ufffd \u7487\u950b\ue5c5\u93cc\ufffd window.G_RobotSourceId\u9428\u52eb\ufffd\u7877\u7d12");if(S!=(E+"default.php")){g.io({type:"get",url:E+"default.php",dataType:"jsonp",jsonpCallback:"RobotEntryJSONPCallbackDefault",success:function(ae){v(ae)},error:function(af,ae){g.log(ae);g.log("\u7f03\u6220\u7cb6\u95bf\u6b12\ue1e4\u951b\ufffd")}})}}})}if(window.G_RobotConfig&&window.G_RobotConfig.defaultClosed===true){N.setItem("robot-close","true")}else{if(window.G_RobotConfig&&window.G_RobotConfig.forceOpen===true){N.removeItem("robot-close")}}V();if(!N.getItem("robot-close")){l();G();Q()}else{}})});
